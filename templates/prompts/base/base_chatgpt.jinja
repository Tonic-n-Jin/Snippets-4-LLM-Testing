{#
    Base ChatGPT Template - Universal Fallback

    This template provides the standard markdown-based structure optimized
    for GPT-4 and compatible models. Other templates extend this base.

    Variables:
        role (str): The AI's role definition
        instructions (str): Main task instructions
        reasoning_strategy (str, optional): How to approach the problem
        output_format (str): Expected output structure
        examples (list[dict], optional): Few-shot examples
        constraints (list[str], optional): Behavioral constraints
        safety_guidelines (str, optional): Content policies
        checklist (list[str], optional): Validation checklist

    Model metadata (auto-injected):
        model_id (str): Full model identifier
        provider (str): Provider name
        context_length (int): Max context window
        display_name (str): Human-readable model name
#}
{% block header %}
# SYSTEM PROMPT{% if display_name %}: {{ display_name }}{% endif %}

{% endblock %}

{% block role_section %}
## Role
{% if role %}
{{ role }}
{% else %}
[Define the AI's role and expertise]
{% endif %}

{% endblock %}

{% block reasoning_section %}
{% if reasoning_strategy %}
## Reasoning Strategy
{{ reasoning_strategy }}

{% endif %}
{% endblock %}

{% block instructions_section %}
## Task
{% if instructions %}
{{ instructions }}
{% else %}
[Describe what the AI should do]
{% endif %}

{% endblock %}

{% block examples_section %}
{% if examples %}
## Examples
{% for example in examples %}
### Example {{ loop.index }}
**Input:** {{ example.input }}
**Output:** {{ example.output }}
{% if example.explanation %}
**Explanation:** {{ example.explanation }}
{% endif %}

{% endfor %}
{% endif %}
{% endblock %}

{% block constraints_section %}
{% if constraints %}
## Constraints
{% for constraint in constraints %}
- {{ constraint }}
{% endfor %}

{% endif %}
{% endblock %}

{% block safety_section %}
{% if safety_guidelines %}
## Guidelines
{{ safety_guidelines }}

{% endif %}
{% endblock %}

{% block output_section %}
## Output Format
{% if output_format %}
{{ output_format }}
{% else %}
[Specify expected output structure]
{% endif %}

{% endblock %}

{% block checklist_section %}
{% if checklist %}
# CHECKLIST
{% for item in checklist %}
- [ ] {{ item }}
{% endfor %}
{% endif %}
{% endblock %}
